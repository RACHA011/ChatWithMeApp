<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Home</title>
    <script>
      async function fetchUserDetails() {
        try {
          const response = await fetch(
            "/auth/user/details-using-authentication"
          );
          if (response.ok) {
            const data = await response.json();
            document.getElementById(
              "user-details"
            ).innerText = `You are logged in as ${data.username}`;
          } else {
            document.getElementById("user-details").innerText =
              "No user authenticated.";
          }
        } catch (error) {
          console.error("Error fetching user details:", error);
        }
      }

      document.addEventListener("DOMContentLoaded", fetchUserDetails);
    </script>
    <link rel="stylesheet" href="../static/css/style.css" type="text/css" />
  </head>
  <body>
    <h1>Welcome</h1>

    <!-- Dynamic user details -->
    <p id="user-details">Loading user details...</p>

    <!-- Logout and login links -->
    <p>
      <a
        th:href="@{/logout}"
        onclick="return confirm('Are you sure you want to logout?');"
        >Logout</a
      >
    </p>
    <p>
      <a th:href="@{/login}">Login</a>
    </p>

    <p><a th:href="@{/chat}">chat</a></p>
    <p><a th:href="@{/add-user}">add user</a></p>
  </body>
</html>
